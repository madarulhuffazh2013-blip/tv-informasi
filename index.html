<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Informasi Pondok</title>

<style>
body{
    margin:0;
    background: linear-gradient(#0b3d2e, #145a32);
    font-family: Arial, sans-serif;
    color:white;
}
.container{ padding:20px; }
.header{ display:flex; justify-content:space-between; align-items:center; }
.logo-area{ display:flex; align-items:center; gap:12px; }
.logo-area img{ width:60px; height:auto; }
.logo-area span{ font-size:26px; font-weight:bold; }
.clock{ font-size:64px; font-weight:bold; }
.date{ font-size:22px; }
.section-title{ font-size:30px; margin-top:20px; border-bottom:3px solid gold; width:fit-content; }
.sholat{ display:flex; flex-wrap:wrap; gap:20px; margin-top:15px; font-size:24px; }
.card{ background:rgba(0,0,0,0.4); padding:15px 20px; border-radius:12px; text-align:center; min-width:120px; }
.announcement{ margin-top:20px; font-size:26px; background:rgba(0,0,0,0.4); padding:18px; border-radius:12px; }
.running-text{ position:fixed; bottom:0; width:100%; background:black; color:gold; font-size:22px; padding:8px; }
marquee{ width:100%; }
#countdown{ font-size:50px; margin-top:10px; font-weight:bold; color:gold; text-align:center; }
</style>
</head>
<body>

<div class="container">

<div class="header">
    <div>
        <div class="logo-area">
            <img src="logo.png">
            <span>MADRASAH ALIYAH DARUL HUFFAZH</span>
        </div>
        <div class="date" id="date"></div>
    </div>

    <div class="clock" id="clock"></div>
</div>

<div class="section-title">WAKTU SHOLAT</div>

<div class="sholat">
    <div class="card">Subuh<br><span id="subuh">--:--</span></div>
    <div class="card">Dzuhur<br><span id="dzuhur">--:--</span></div>
    <div class="card">Ashar<br><span id="ashar">--:--</span></div>
    <div class="card">Maghrib<br><span id="maghrib">--:--</span></div>
    <div class="card">Isya<br><span id="isya">--:--</span></div>
</div>

<div class="section-title">COUNTDOWN SHOLAT BERIKUTNYA</div>
<div class="clock" id="countdown">--:--:--</div>

<div class="section-title">PENGUMUMAN</div>

<div class="announcement" id="announce">
- Upacara hari Senin pukul 07.00 WIB <br>
- Kebersihan kelas menjadi tanggung jawab bersama <br>
- Setoran hafalan setiap ba'da Subuh
</div>

</div>

<div class="running-text">
<marquee>
"Menuntut ilmu adalah jalan menuju surga" | Madrasah Aliyah Darul Huffazh
</marquee>
</div>

<script>
// ===================== JAM & TANGGAL =====================
function updateClock(){
    let now = new Date();
    let h = String(now.getHours()).padStart(2,'0');
    let m = String(now.getMinutes()).padStart(2,'0');
    let s = String(now.getSeconds()).padStart(2,'0');
    document.getElementById("clock").innerHTML = h+":"+m+":"+s;

    let days = ["Ahad","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"];
    let months = ["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"];

    document.getElementById("date").innerHTML =
    days[now.getDay()] + ", " +
    now.getDate() + " " +
    months[now.getMonth()] + " " +
    now.getFullYear();
}

setInterval(updateClock,1000);
updateClock();

// ===================== LOAD JADWAL SHOLAT MANUAL =====================
const kota = "bandar lampung"; // ubah sesuai kota

async function loadSholat(){
    try{
        // Cari ID kota dari API MyQuran
        let res = await fetch("https://api.myquran.com/v2/sholat/jadwal/kota/cari/"+kota);
        let data = await res.json();
        let id = data.data[0].id;

        let today = new Date();
        let tgl = today.getFullYear()+"-"+String(today.getMonth()+1).padStart(2,"0")+"-"+String(today.getDate()).padStart(2,"0");

        let jadwalRes = await fetch("https://api.myquran.com/v2/sholat/jadwal/"+id+"/"+tgl);
        let jadwalData = await jadwalRes.json();
        let j = jadwalData.data.jadwal;

        document.getElementById("subuh").textContent = j.subuh;
        document.getElementById("dzuhur").textContent = j.dzuhur;
        document.getElementById("ashar").textContent = j.ashar;
        document.getElementById("maghrib").textContent = j.maghrib;
        document.getElementById("isya").textContent = j.isya;
    }
    catch(e){
        console.log("Gagal load jadwal sholat");
    }
}

// ===================== COUNTDOWN =====================
function updateCountdown() {
    const now = new Date();
    const sholatTimes = [
        {name: "Subuh", time: document.getElementById("subuh").textContent},
        {name: "Dzuhur", time: document.getElementById("dzuhur").textContent},
        {name: "Ashar", time: document.getElementById("ashar").textContent},
        {name: "Maghrib", time: document.getElementById("maghrib").textContent},
        {name: "Isya", time: document.getElementById("isya").textContent}
    ];

    let nextSholat = null;

    for (let i = 0; i < sholatTimes.length; i++) {
        const [hour, minute] = sholatTimes[i].time.split(":").map(Number);
        if(isNaN(hour) || isNaN(minute)) continue; // skip jika belum load
        const sholatDate = new Date(now.getFullYear(), now.getMonth(), now.getDate(), hour, minute, 0);
        if (sholatDate > now) {
            nextSholat = sholatDate;
            break;
        }
    }

    // Jika semua sholat sudah lewat, ambil Subuh besok
    if (!nextSholat) {
        const [hour, minute] = sholatTimes[0].time.split(":").map(Number);
        nextSholat = new Date(now.getFullYear(), now.getMonth(), now.getDate()+1, hour, minute, 0);
    }

    if(nextSholat){
        const diff = nextSholat - now;
        const h = String(Math.floor(diff / (1000*60*60))).padStart(2,"0");
        const m = String(Math.floor((diff % (1000*60*60)) / (1000*60))).padStart(2,"0");
        const s = String(Math.floor((diff % (1000*60)) / 1000)).padStart(2,"0");
        document.getElementById("countdown").textContent = h + ":" + m + ":" + s;
    }
}

setInterval(updateCountdown,1000);
loadSholat();
</script>

</body>
</html>
